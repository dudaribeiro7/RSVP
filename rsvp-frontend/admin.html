<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin ‚Äì RSVP Formatura Duda</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;800&family=Allura&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/admin.css">
</head>

<body>
  <div class="page-bg-top"></div>
  <div class="page-bg-bottom"></div>

  <!-- LOGIN OVERLAY -->
  <div class="admin-login" id="admin-login" aria-hidden="true">
    <div class="admin-login__card">
      <h1 class="admin-login__title">Admin</h1>
      <p class="admin-login__text">Digite seu PIN</p>

      <form id="login-form" class="admin-login__form">
        <input id="login-token" type="password" inputmode="numeric" autocomplete="one-time-code" placeholder="PIN / Token" />
        <button class="btn-primary" type="submit">Entrar</button>
        <p class="admin-login__error" id="login-error"></p>
      </form>
    </div>
  </div>

  <header class="admin-hero">
    <div class="admin-hero__inner">
      <div class="admin-hero__left">
        <h1 class="admin-title">Admin RSVP</h1>
        <p class="admin-subtitle">Formatura Duda ‚Ä¢ 07/02/2026</p>
      </div>

      <div class="admin-hero__right">
        <!-- TABS - MOVIDAS PARA CIMA -->
        <div class="admin-tabs">
          <button class="admin-tab active" data-tab="guests">
            <span class="admin-tab__icon">üë•</span>
            <span class="admin-tab__label">Convidados</span>
          </button>
          <button class="admin-tab" data-tab="photos">
            <span class="admin-tab__icon">üì∏</span>
            <span class="admin-tab__label">Fotos</span>
          </button>
          <button class="admin-tab" data-tab="tables">
            <span class="admin-tab__icon">ü™ë</span>
            <span class="admin-tab__label">Mesas</span>
          </button>
        </div>

        <div class="admin-actions">
          <button class="btn-secondary" id="btn-refresh" type="button">Atualizar</button>
          <button class="btn-secondary guests-only" id="btn-export-docx" type="button">Exportar DOCX</button>
          <button class="btn-secondary guests-only" id="btn-export-pdf" type="button">Exportar PDF</button>
          <button class="btn-secondary photos-only hidden-in-guests" id="btn-download-photos" type="button">‚¨áÔ∏è Baixar todas as fotos</button>
          <button class="btn-secondary tables-only hidden-in-guests hidden-in-photos" id="btn-save-tables" type="button">üíæ Salvar mesas</button>
          <button class="btn-secondary tables-only hidden-in-guests hidden-in-photos" id="btn-clear-tables" type="button">üóëÔ∏è Limpar tudo</button>
          <button class="btn-secondary" id="btn-logout" type="button">Sair</button>
          <a class="btn-secondary" href="index.html">Voltar pro site</a>
        </div>

        <!-- Filtros de Convidados -->
        <div class="admin-filters guests-only" id="guests-filters">
          <div class="admin-search">
            <input id="search" type="text" placeholder="Buscar por nome, telefone, recado, acompanhante..." autocomplete="off">
          </div>
        </div>

        <!-- Filtros de Fotos -->
        <div class="admin-filters hidden" id="photos-filters">
          <div class="admin-search">
            <input id="photos-search" type="text" placeholder="Buscar por nome..." autocomplete="off">
          </div>
        </div>

        <!-- Controles de Mesas -->
        <div class="admin-filters hidden" id="tables-filters">
          <div class="tables-controls">
            <label for="num-tables">N√∫mero de mesas:</label>
            <input type="number" id="num-tables" min="1" max="50" value="10" />
            <button class="btn-secondary" id="btn-generate-tables">Gerar mesas</button>
          </div>
        </div>

        <div class="admin-summary guests-only" id="summary"></div>
        <div class="admin-status" id="status"></div>
      </div>
    </div>
  </header>

  <main class="admin-main">
    <!-- TAB: Convidados -->
    <div class="tab-content active" id="tab-guests">
      <section class="admin-card" id="section-yes">
        <div class="admin-card__header">
          <h2 class="admin-card__title">
            Confirmados <span class="pill pill--yes" id="count-yes">0</span>
          </h2>
        </div>

        <div class="table-wrap">
          <table class="admin-table" id="table-yes">
            <thead>
              <tr>
                <th>Convidado</th>
                <th>Telefone</th>
                <th>Resposta em</th>
                <th>Recado</th>
                <th>Acompanhantes</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <section class="admin-card" id="section-no">
        <div class="admin-card__header">
          <h2 class="admin-card__title">
            N√£o v√£o <span class="pill pill--no" id="count-no">0</span>
          </h2>
        </div>

        <div class="table-wrap">
          <table class="admin-table" id="table-no">
            <thead>
              <tr>
                <th>Convidado</th>
                <th>Telefone</th>
                <th>Resposta em</th>
                <th>Recado</th>
                <th>Acompanhantes</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <section class="admin-card" id="section-maybe">
        <div class="admin-card__header">
          <h2 class="admin-card__title">
            Talvez <span class="pill pill--maybe" id="count-maybe">0</span>
          </h2>
        </div>

        <div class="table-wrap">
          <table class="admin-table" id="table-maybe">
            <thead>
              <tr>
                <th>Convidado</th>
                <th>Telefone</th>
                <th>Resposta em</th>
                <th>Recado</th>
                <th>Acompanhantes</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>
    </div>

    <!-- TAB: Fotos -->
    <div class="tab-content hidden" id="tab-photos">
      <section class="admin-card">
        <div class="admin-card__header">
          <h2 class="admin-card__title">
            Galeria <span class="pill" id="photos-total-count">0</span>
          </h2>
        </div>

        <div id="photos-loading" class="photos-admin-loading hidden">
          <div class="loading-spinner"></div>
          <span>Carregando fotos...</span>
        </div>

        <div id="photos-empty" class="photos-admin-empty hidden">
          Nenhuma foto enviada ainda.
        </div>

        <div id="photos-admin-gallery" class="photos-admin-gallery"></div>
      </section>
    </div>
    <!-- TAB: Mesas -->
    <div class="tab-content hidden" id="tab-tables">
      <section class="admin-card">
        <div class="admin-card__header">
          <h2 class="admin-card__title">Organiza√ß√£o de Mesas</h2>
        </div>

        <div id="tables-container" class="tables-container">
          <p class="tables-empty">Defina o n√∫mero de mesas acima e clique em "Gerar mesas"</p>
        </div>
      </section>
    </div>
  </main>

  <!-- Modal de confirma√ß√£o de exclus√£o -->
  <div class="delete-modal" id="delete-modal">
    <div class="delete-modal__backdrop"></div>
    <div class="delete-modal__card">
      <h3 class="delete-modal__title">Excluir foto?</h3>
      <img id="delete-modal-preview" class="delete-modal__preview" alt="Preview">
      <p class="delete-modal__text">Esta a√ß√£o n√£o pode ser desfeita.</p>
      <div class="delete-modal__actions">
        <button class="btn-secondary" id="delete-cancel">Cancelar</button>
        <button class="btn-primary" id="delete-confirm" style="background: #b71c1c;">Excluir</button>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="js/admin.js"></script>
</body>
</html>